---
title: Gatsbyì—ì„œ Comment ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°
date: 2021-07-13
slug: /blog/gatsby/comments
categories: ['all','gatsby']
---

GatsbyëŠ” ë¸”ë¡œê·¸ ë‚´ì—ì„œ ëŒ“ê¸€ ë‹¬ê¸° ê¸°ëŠ¥ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤ :)

:point_down:

[Gatsby Adding Commnet](https://www.gatsbyjs.com/docs/how-to/adding-common-features/adding-comments/)ë¥¼ í™•ì¸í•´ë³´ì‹œë©´ ì§€ì›ë˜ëŠ” í”Œë«í¼ì´ ë¬´ë ¤ 6ê°€ì§€ë‚˜ ìˆìŠµë‹ˆë‹¤.

ê°€ì¥ ì¶”ì²œí•˜ê³  ìˆëŠ” ê²ƒì€ **Disqus**ì¸ ë“¯ í•˜ë‚˜ ìì‹ ì˜ ë§ˆìŒì— ë“œì‹œëŠ” ê²ƒì„ í•˜ë‚˜ ì„ íƒí•˜ì„¸ìš”.

ì œê°€ ì¶”ì²œë“œë¦¬ê³  ì‹¶ì€ ëŒ“ê¸€ í”Œë«í¼ì€ **Utterances** ì…ë‹ˆë‹¤.

UtterancesëŠ” ê¹ƒí—ˆë¸Œì™€ ì—°ë™ì´ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê¹ƒí—ˆë¸Œ ê³„ì •ë§Œ ìˆë‹¤ë©´ ëˆ„êµ¬ë‚˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë˜í•œ ëŒ“ê¸€ ì•Œë¦¼ ê¸°ëŠ¥ì´ ìˆìœ¼ë©° SEO(ê²€ìƒ‰ì—”ì§„ìµœì í™”)ë¥¼ ìœ ë¦¬í•˜ê²Œ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤ê³  ì•Œë ¤ì ¸ ìˆê¸° ë•Œë¬¸ì—

ê¸°ëŠ¥ì ì¸ ë¶€ë¶„ì—ì„œ ë§ì€ ì´ë“ì„ ì·¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  UIê°€ êµ‰ì¥íˆ ì‹¬í”Œí•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ì ì¸ ì¸¡ë©´ì—ì„œ ì–´ë µì§€ ì•Šì•„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì„ ë“¯ í•©ë‹ˆë‹¤.

Utterancesì˜ ë™ì‘ì›ë¦¬ëŠ” Github ì´ìŠˆ ê²€ìƒ‰ APIë¥¼ ì‚¬ìš©í•˜ì—¬ `url`, `pathname` ë˜ëŠ” `title`ì„ ê¸°ì¤€ìœ¼ë¡œ í˜ì´ì§€ì™€ ê´€ë ¨ëœ issueë¥¼ ì°¾ìœ¼ë©°

ë§Œì•½ issueë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´ Utterancesê°€ ìë™ìœ¼ë¡œ issueë¥¼ ìƒì„±í•  ê²ƒ ì…ë‹ˆë‹¤.

ì´ë¥¼ ì¢€ ë” ì´í•´í•˜ê¸° ì‰½ê²Œ í•˜ê¸°ìœ„í•´ì„œ ìš°ì„  Utterances ë¹Œë“œë¥¼ ì‹œì‘í•´ë³´ë„ë¡ í•©ì‹œë‹¤. :blush:

## Utterances êµ¬ì„±í•˜ê¸°

Utterancesë¥¼ ë¹Œë“œí•˜ëŠ” ê²ƒì€ ì–´ë µì§€ ì•ŠìŠµë‹ˆë‹¤.

ë¨¼ì € [Utterances](https://utteranc.es/) ê³µì‹ ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸ í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

1. configuration

  ![Uterrances Configuration](./gatsby-comments-01.PNG 'Uterrances Configuration')

  1,2,3ë²ˆ ë¬¸ì¥ì— ì£¼ì˜í•˜ì„¸ìš”.

  UtterancesëŠ” ê¹ƒ ë ˆí¬ì§€í† ë¦¬ì˜ ì´ìŠˆë¡œ ì¸í•´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ëŒ“ê¸€ì„ ë‹¬ ë ˆí¬ì§€í† ë¦¬ëŠ” ë°˜ë“œì‹œ `public`ìœ¼ë¡œ ì„¤ì •ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

  ë˜í•œ Utterancesë¥¼ ì‚¬ìš©í•´ ëŒ“ê¸€ì„ ë‹¬ê¸° ìœ„í•´ì„œëŠ” **[Utterances App](https://github.com/apps/utterances)**ì„ ì„¤ì¹˜í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.

  ì„¤ì¹˜í•œ í›„ ëª¨ë“  ë ˆí¬ì§€í† ë¦¬ì— ëŒ€í•´ Utterancesë¥¼ ì‚¬ìš©í•  í•„ìš”ëŠ” ì—†ìœ¼ë¯€ë¡œ ìì‹ ì´ ì‚¬ìš©í•  ê¹ƒ ë ˆí¬ì§€í† ë¦¬ë§Œ í—ˆìš©í•˜ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤.

2. Blog Post <-> Issue Mapping

  ![Uterrances Issue Mapping](./gatsby-comments-02.PNG 'Uterrances Issue Mapping')

  Issueë¥¼ ë¬´ì—‡ì— ì˜ì¡´í•´ ìƒì„±í• ì§€ ì„ íƒí•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

  ì €ëŠ” 1ë²ˆì¸ pathnameìœ¼ë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

3. Issue Label & Theme

  ![Uterrances Issue Label](./gatsby-comments-03.PNG 'Uterrances Issue Label')

  ìì‹ ì´ ì›í•˜ëŠ” Issue Labelê³¼ í…Œë§ˆë¥¼ ì„¤ì •í•˜ì„¸ìš”.

4. Enable Utterances

  ![Uterrances Enable Utterances](./gatsby-comments-04.PNG 'Uterrances Enable Utterances')

  ìµœì¢…ì ìœ¼ë¡œ ìš°ë¦¬ê°€ ì„¤ì •í•œ ê°’ì— ëŒ€í•œ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

  Utterancesë¥¼ ìš°ë¦¬ì˜ í”„ë¡œì íŠ¸ ì•±ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•´ì„œ ë¶™ì—¬ ë„£ìœ¼ë©´ ì™„ì„±ë©ë‹ˆë‹¤.

## Utterances ë¹Œë“œ

ìš°ë¦¬ëŠ” Gatsbyì—ì„œ React + TypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ìˆìœ¼ë¯€ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ë„ë¡ í•©ì‹œë‹¤.

1. Utterances Compoennt ìƒì„±

  `src/compoennts` ë””ë ‰í† ë¦¬ì— `utterances.tsx` ì»´í¬ë„ŒíŠ¸ ìƒì„±

  `src/components/utterances.tsx`
  ```tsx
  import React, { createRef, useLayoutEffect } from 'react';

  const src = 'https://utteranc.es/client.js';

  export interface IUtterancesProps {
    repo: string;
    theme: string;
  }

  const Utterances: React.FC<IUtterancesProps> = React.memo(({ repo, theme }) => {
    const containerRef = createRef<HTMLDivElement>();

    useLayoutEffect(() => {
      const utterances = document.createElement('script');
      const attributes = {
        src,
        repo,
        theme,
        'issue-term': 'pathname',
        label: 'âœ¨ğŸ’¬ comments âœ¨',
        crossOrigin: 'anonymous',
        async: 'true',
      };

      Object.entries(attributes).forEach(([key, value]) => {
        utterances.setAttribute(key, value);
      });

      containerRef.current!.appendChild(utterances);
    }, [repo]);

    return <div ref={containerRef} />;
  });

  Utterances.displayName = 'Utterances';

  export default Utterances;
  ```

  :point_up:

  ì´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì´ë ‡ê²Œ ì‘ì„±í•œ ê²ƒê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤.

  ```js
  <script src="https://utteranc.es/client.js"
          repo="ShigatsuEl/gatsby-tsuel"
          issue-term="pathname"
          label="comments"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>
  ```

2. Utterances ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

  Utterancesë¥¼ ì‚¬ìš©í•  ì¥ì†Œ `src/templates/blog-post.tsx`ì—ì„œ import í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

  Utterances ì»´í¬ë„ŒíŠ¸ì— í•„ìš”í•œ propsëŠ” `repo`ì™€ `theme` 2ê°œ ì…ë‹ˆë‹¤.

  `src/templates/blog-post.tsx`
  ```tsx
  const BlogPost = () => {
    ...
    return (
      ...
      <footer>
        <Utterances repo="ShigatsuEl/gatsby-tsuel" theme="github-light" />
      </footer>
      ...
    )
  }
  ```

  ë§¨ ì•„ë«ë¶€ë¶„ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚½ì…í•˜ì˜€ìŠµë‹ˆë‹¤.

  ì´ì œ ì„œë²„ë¥¼ ê°€ë™í•˜ê³  ìì‹ ì˜ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ê¸€ë¡œ ì´ë™í•´ë³´ì„¸ìš” :wink:

![Uterrances Result](./gatsby-comments-05.PNG 'Uterrances Result')

Utterances APIë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì„±ê³µí–ˆìŠµë‹ˆë‹¤! :satisfied:

ì´ì œ ì—¬ëŸ¬ë¶„ì´ ëŒ“ê¸€ì„ ë‹¬ì•„ë³¼ ì°¨ë¡€ì…ë‹ˆë‹¤.

Utterancesë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê¹ƒí—ˆë¸Œì™€ ì—°ë™ì‹œí‚¤ê³  ëŒ“ê¸€ì„ ë‹¬ì•„ë³´ì„¸ìš”~

![Uterrances Comment](./gatsby-comments-06.PNG 'Uterrances Comment')

ëŒ“ê¸€ì„ ë‚¨ê¸°ëŠ” ê²ƒì„ ì„±ê³µí–ˆìŠµë‹ˆë‹¤. :clap:

ì´ ëŒ“ê¸€ì€ ì–´ë–»ê²Œ ìƒê¸°ëŠ” ê²ƒ ì¼ê¹Œìš”?

ë”°ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‘” ê²ƒë„ ì•„ë‹Œë° ë§ì…ë‹ˆë‹¤.

í™•ì¸ì„ ìœ„í•´ì„œëŠ” ìš°ë¦¬ê°€ ìœ„ì—ì„œ Utterances Configurationì„ í•˜ë©´ì„œ ì„¤ì •í•œ `repo`(Repository)ë¡œ ì´ë™í•´ë´…ì‹œë‹¤.

http://github.com/your-name/your-repo/ë¡œ ì´ë™í•˜ë©´ ë¬´ì—‡ì´ ë³´ì´ì‹œë‚˜ìš”?

![Uterrances Github Issue](./gatsby-comments-07.PNG 'Uterrances Github Issue')

ì´ìŠˆê°€ í•˜ë‚˜ ìƒì„±ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ìŠˆ ë‚´ìš©ì„ ë³´ê¸° ìœ„í•´ í´ë¦­í•˜ì„¸ìš”.

:point_down:

![Uterrances Github Issue Content](./gatsby-comments-08.PNG 'Uterrances Github Issue Content')

`http://localhost:8000/blog/gatsby/previous-next`ì—ì„œ ëŒ“ê¸€ì„ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì— pathnameì— ë”°ë¼

`blog/gatsby/previous-next`ë¼ëŠ” ì œëª©ìœ¼ë¡œ ì´ìŠˆê°€ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Utterancesë¥¼ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ì‹ìœ¼ë¡œ ê¹ƒí—ˆë¸Œ ì´ìŠˆë¥¼ í†µí•´ ëŒ“ê¸€ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœ ê²ƒ ì…ë‹ˆë‹¤.

ì–´ë– ì…¨ë‚˜ìš”? :blush:

ì œê°€ ì†Œê°œí•œ Utterancesê°€ ë§ˆìŒì— ë“œì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤ :)